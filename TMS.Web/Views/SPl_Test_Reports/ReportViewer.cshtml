
@{
    /**/

    ViewBag.Title = "ReportViewer";
}

<h2>ReportViewer</h2>


@using lr = Resources.Resources;



<style>
    div#calender {
        width: 1082px;
    }

    .fc-content {
        color: #000;
    }

    td.fc-day.fc-widget-content.fc-sun.fc-today.fc-state-highlight {
        background-color: #80BFC8;
    }

    .right-inner-addon {
        display: none;
    }

    .fc button .fc-icon {
        position: relative;
        top: -.05em;
        margin: 0 .2em;
        /* vertical-align: middle; */
    }

    span.fc-time {
        display: none;
    }
</style>


<style>
    .form-group {
        display: grid;
    }

    .input-group {
        display: none;
    }

    .col-md-12.col-lg-offset-2 {
        margin-bottom: 26px;
    }
    /*li {
        display: none;
    }*/
</style>
@*<div class="col-md-offset-2">*@

<div class="row" style="margin-left:10%;">

    <div class="form-group">

        <div class="row" style="margin-top:1%;">
            @Html.Label("Class", new { @class = "col-md-3 col-lg-3 control-label" })
            <div class="col-md-7 col-lg-7 col-sm-11">
                @(Html.Kendo().DropDownList()
                                                                                                                    .Name("Class")
                                                                                                                    .DataTextField("Text")
                                                                                                                    .DataValueField("Value")
                                                                                                                    .DataSource(source =>
                                                                                                                    {
                                                                                                                        source.Read(read =>
                                                                                                                        {
                                                                                                                            read.Action("Classes", "DDL");
                                                                                                                        });
                                                                                                                    })
                                                                                                                    .HtmlAttributes(new { @class = "form-control ", @style = " width: 100%;" })
                                                                                                                                                                                                        .HtmlAttributes(new { style = "width: 100%" })
                )
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="row" style="margin-top:1%;">
            @Html.Label("Course", new { @class = "col-md-3 col-lg-3 control-label" })
            <div class="col-md-7 col-lg-7 col-sm-11">
                @(Html.Kendo().DropDownList()
                                                                                                                   .Name("Course")
                                                                                                                   .DataTextField("Text")
                                                                                                                   .DataValueField("Value")
                                                                                                                   .DataSource(source =>
                                                                                                                   {
                                                                                                                       source.Read(read =>
                                                                                                                       {
                                                                                                                           read.Action("Course", "DDL");
                                                                                                                       });
                                                                                                                   })
                                                                                                                  .HtmlAttributes(new { @class = "form-control ", @style = " width: 100%;" })
                )

            </div>
        </div>
    </div>
    <div class="form-group col-md-2 col-lg-2 col-sm-2" style="margin-left:65%;margin-top:1%;">
        @(Html.Kendo().Button()
                                                                                                               .Name("H2")
                                                                                                               .HtmlAttributes(new { type = "button", @class = "btn btn-primary k-primary" })
                                                                                                               .Content("" + @lr.ActivitySummaryReport + "")
        )
    </div>



</div>




<div class="row">
    <div class="col-lg-10">
        <iframe id="ifrmReportViewer" frameborder="0" src="" width="1000" height="1000" style="overflow:hidden;"></iframe>
    </div>
</div>

<script type="text/javascript">
    jQuery(function () {
        jQuery("#H2").live("click", function (event) {

            var url = jQuery('#hdUrl').val();
            var yearmonth = 2019;
            var stockInTransit = jQuery('#txtStockInTransit').val()

            if (stockInTransit == "") {
                stockInTransit = 0;
            }

            if (yearmonth == "0") {
                alert("Please Select Month Correctly.");
            }
            else {

                //url = url + "dpSpYearMonth=" + yearmonth + ",rpYearMonth=" + yearmonth + ",rpStockInTransit=" + stockInTransit;
                var courseId = jQuery("#Course").data("kendoDropDownList").value();
                var classId = jQuery("#Class").data("kendoDropDownList").value();
                url = "/Views/Report/SpLReports/ReportView.aspx?rptmode=local&reportname=Tran_ViewCourseAttendanceReport&ClassID=" + classId + "&CourseID=" + courseId+"";
               
                var myframe = document.getElementById("ifrmReportViewer");
                if (myframe !== null) {
                    if (myframe.src) {
                        myframe.src = url;
                    }
                    else if (myframe.contentWindow !== null && myframe.contentWindow.location !== null) {
                        myframe.contentWindow.location = url;
                    }
                    else { myframe.setAttribute('src', url); }
                }
            }

            return false;
        
        })
    })
</script>